@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Newtonsoft.Json
@{
    Layout = "masterLayout.cshtml";
    ViewBag.Title = "Ekibimiz";
    
    var siteUrl = $"{Context.Request.Scheme}://{Context.Request.Host}";
    var currentUrl = $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}";

    // --- DİNAMİK EKİP LİSTESİ ---
    // Yeni personel eklemek için sadece bu listeye bir satır eklemen yeterli.
    // HTML ve Google Schema otomatik olarak güncellenecektir.
    var teamMembers = new List<dynamic>
    {
        new { Id=1, Name = "Bilal Aktaş", Title = "Kurucu & Genel Müdür", Image = "/media/lvcd1dr1/bilal-aktas-profil-fotografi.webp", Link = "/bilal-aktas/" },
        new { Id=2, Name = "Güray Çakıcı", Title = "Satış & İş Geliştirme Müdürü", Image = "/media/eqefubcx/guray-cakici-profil-fotografi.jpg", Link = "/guray-cakici/" },
        new { Id=3, Name = "Hayati Uçan", Title = "Saha Operasyon Koordinatörü", Image = "/media/nlmjbhyl/hayati-ucan-profil-fotografi.jpg", Link = "/hayati-ucan/" },
        new { Id=5, Name = "Hasan Uysal", Title = "Satış Koordinatörü", Image = "/media/5tolblj1/hasan-uysal-profil-fotografi-180px.jpg", Link = "/hasan-uysal/" },
        new { Id=6, Name = "Semih Aygün", Title = "Satış & Arsa Yatırım Uzmanı", Image = "/media/eoydnwc5/semih-aygun-profil-fotografi-180px.jpg", Link = "/semih-aygun/" },
        new { Id=7, Name = "Hakan Yant", Title = "Satış & Arsa Yatırım Uzmanı", Image = "/media/ceuafce4/hakan-yant-profil-fotografi.jpg", Link = "/hakan-yant/" },
        new { Id=8, Name = "Furkan Hoşgör", Title = "Satış & Arsa Yatırım Uzmanı", Image = "/media/t45ddtls/furkan-hosgor-profil-fotografi-180px.jpg", Link = "/furkan-hosgor/" },
        new { Id=9, Name = "İlayda Zeybek", Title = "Pazarlama Uzmanı", Image = "/media/xlyeiipc/ilayda-zeybek-profil-fotografi.webp", Link = "/ilayda-zeybek/" },
        new { Id=10, Name = "İrem Nur Yurttaş", Title = "Pazarlama Uzmanı", Image = "/media/44nh3vos/irem-nur-yurttas-profil-fotografi.webp", Link = "/irem-nur-yurttas/" },
        new { Id=11, Name = "Betül Razi", Title = "Pazarlama Uzmanı", Image = "/media/vabifwql/betul-razi-profil-fotografi.jpg", Link = "/betul-razi/" },
        new { Id=12, Name = "Şule Akçay", Title = "Pazarlama Uzmanı", Image = "/media/k00buh33/sule-akcay-profil-fotografi.webp", Link = "/sule-akcay/" },
        new { Id=13, Name = "Melike Özgür", Title = "Pazarlama Uzmanı", Image = "/media/htoj4upk/melike-oezguer-profil-fotografi.webp", Link = "/melike-ozgur/" },
        new { Id=14, Name = "Muhammed Hatay", Title = "Yazılım Uzmanı", Image = "/media/2krdyc44/muhammed-hatay-yeni-profil-fotografi.jpg", Link = "/muhammed-hatay/" },
        new { Id=15, Name = "Halime Uçan", Title = "Dijital Pazarlama & Malî İşler Uzmanı", Image = "/media/1gidgyfc/halime-ucan-profil-fotografi.webp", Link = "/halime-ucan/" },
        new { Id=16, Name = "Sümeyye Atış", Title = "Muhasebe Uzmanı | CEO Asistanı", Image = "/media/2rbduy1t/sumeyye-atis-profil-fotografi.webp", Link = "/sumeyye-atis/" },
        new { Id=17, Name = "Ece Gülerer", Title = "İnsan Kaynakları | Muhasebe Uzmanı", Image = "/media/154iejwp/ece-gulerer-profil-fotografi.webp", Link = "/ece-gulerer/" },
        new { Id=18, Name = "Mine Sevinç", Title = "Ofis Personeli", Image = "/media/34alefky/mine-sevinc-profil-fotografi.jpg", Link = "/mine-sevinc/" }
    };
}

@* --- SEO: ABOUTPAGE + EMPLOYEE LİSTESİ (Otomatik Oluşturulur) --- *@
<script type="application/ld+json">
{
  "@@context": "https://schema.org",
  "@@graph": [
    {
      "@@type": "AboutPage",
      "@@id": "@currentUrl",
      "url": "@currentUrl",
      "name": "Ekibimiz - Liderlik ve Kadro | Bereketli Topraklar",
      "description": "Bereketli Topraklar'ın uzman kadrosuyla tanışın. Arsa yatırımı, satış, pazarlama ve teknik konularda deneyimli ekibimiz.",
      "isPartOf": { "@@id": "@siteUrl/#website" },
      "inLanguage": "tr-TR",
      "mainEntity": { "@@id": "@siteUrl/#organization" }
    },
    {
      "@@type": "Organization",
      "@@id": "@siteUrl/#organization",
      "name": "Bereketli Topraklar",
      "employee": [
        @for (int i = 0; i < teamMembers.Count; i++)
        {
            var m = teamMembers[i];
            var isLast = (i == teamMembers.Count - 1);
            <text>
            {
              "@@type": "Person",
              "name": "@m.Name",
              "jobTitle": "@m.Title",
              "image": "@(siteUrl + m.Image)",
              "url": "@(siteUrl + m.Link)",
              "worksFor": { "@@id": "@siteUrl/#organization" }
            }@(isLast ? "" : ",")
            </text>
        }
      ]
    }
  ]
}
</script>

<link rel="stylesheet" href="/css/team.css">

<section class="team-section">
    <div class="team-container">
        <div class="team-header">
            <h1 class="team-title">LİDERLİK</h1>
            <div class="title-line"></div>
            <p class="team-description">
                Her köşede büyük yaratıcılığı ortaya çıkarmak için sürekli sorgulayan, 
                düşünen ve meydan okuyan bir ekip tarafından yönetiliyoruz.
            </p>
        </div>

        <div class="team-grid">
            @foreach (var member in teamMembers)
            {
                <div class="team-member" data-member="@member.Id" onclick="window.location.href='@member.Link'">
                    <div class="member-photo">
                        <img src="@member.Image" alt="@member.Name Profil Fotoğrafı" loading="lazy">
                        <div class="member-overlay">
                            <a href="@member.Link" class="view-details-btn" aria-label="@member.Name Detayları">→</a>
                        </div>
                    </div>
                    <div class="member-info">
                        <h3 class="member-name">@member.Name</h3>
                        <p class="member-title">@member.Title</p>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<script>
// Hover efektleri ve UX iyileştirmesi
document.querySelectorAll('.team-member').forEach(member => {
    member.style.cursor = 'pointer';
    
    // Kartın kendisine tıklanınca da gitmesi için (Mobil uyumluluk)
    member.addEventListener('click', function(e) {
        // Eğer zaten butona tıklandıysa çift işlem yapma
        if (e.target.closest('.view-details-btn')) return;
        
        const link = this.querySelector('.view-details-btn');
        if(link) window.location.href = link.href;
    });

    member.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-5px)';
        this.style.transition = 'transform 0.3s ease';
        this.style.boxShadow = '0 10px 20px rgba(0,0,0,0.1)';
    });
    
    member.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
        this.style.boxShadow = 'none';
    });
});
</script>

<style>
  /* Resimlerin taşmasını önlemek için güvenlik stili */
  img {
    max-width: 100%;
    height: auto;
  }
</style>