@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Newtonsoft.Json
@{
    Layout = "masterLayout.cshtml";
    ViewBag.Title = "İletişim";
    
    var siteUrl = $"{Context.Request.Scheme}://{Context.Request.Host}";
    var currentUrl = $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}";
    
    // İletişim Bilgileri (Tek yerden yönetmek için değişkenler)
    var address = "Çağrışan Mahallesi, Yaprak Sokak, No:3, Mudanya/BURSA";
    var phone = "+90 224 432 49 59";
    var phoneLink = "+902244324959";
    var phone2 = "444 9 516";
    var phoneLink2 = "4449516";
    var email = "info@bereketlitopraklar.com.tr";
    var mapEmbedUrl = "https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d452.4390161683914!2d28.932938422756322!3d40.28386258849352!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14ca15cce65823f3%3A0x3492c85f62c76287!2sBereketli%20Topraklar!5e0!3m2!1str!2sus!4v1770359953629!5m2!1str!2sus";
}

@* --- SEO: CONTACTPAGE SCHEMA --- *@
<script type="application/ld+json">
{
  "@@context": "https://schema.org",
  "@@graph": [
    {
      "@@type": "ContactPage",
      "@@id": "@currentUrl",
      "url": "@currentUrl",
      "name": "İletişim | Bereketli Topraklar",
      "description": "Bereketli Topraklar ofis adresi, telefon numarası ve iletişim bilgileri. Bursa Mudanya'daki merkez ofisimize bekleriz.",
      "isPartOf": { "@@id": "@siteUrl/#website" },
      "inLanguage": "tr-TR",
      "mainEntity": { "@@id": "@siteUrl/#organization" }
    },
    {
      "@@type": "Organization",
      "@@id": "@siteUrl/#organization",
      "name": "Bereketli Topraklar",
      "url": "@siteUrl",
      "contactPoint": {
        "@@type": "ContactPoint",
        "telephone": "@phone",
        "contactType": "customer service",
        "email": "@email",
        "areaServed": "TR",
        "availableLanguage": "Turkish"
      },
      "address": {
        "@@type": "PostalAddress",
        "streetAddress": "Çağrışan Mahallesi, Yaprak Sokak, No:3",
        "addressLocality": "Mudanya",
        "addressRegion": "Bursa",
        "postalCode": "16940",
        "addressCountry": "TR"
      }
    }
  ]
}
</script>

<script src="/Scripts/tour.js"></script>
@section Scripts {
<script>
document.addEventListener('DOMContentLoaded', function () {
  var krpano = null;

  // pano'yu başlat
  embedpano({
    xml: "/turlar/bereketli-topraklar-ofis/sanaltur.xml",
    target: "pano",
    html5: "auto",
    mobilescale: 1.0,
    passQueryParameters: true,
    onready: function (k) { krpano = k; }
  });

  // elemanlar
  const fullscreenBtn = document.getElementById('fullscreen-btn');
  const panoPreview   = document.getElementById('pano-preview');
  const closeBtn      = document.getElementById('pano-close-btn');

  function enterPanoFullscreen() {
    if (panoPreview) panoPreview.classList.add('fullscreen');
    if (krpano && typeof krpano.call === 'function') krpano.call('enterfullscreen();');
  }

  function exitPanoFullscreen() {
    if (panoPreview) panoPreview.classList.remove('fullscreen');
    if (krpano && typeof krpano.call === 'function') krpano.call('exitfullscreen();');
  }

  if (fullscreenBtn) fullscreenBtn.addEventListener('click', enterPanoFullscreen);
  if (closeBtn)      closeBtn.addEventListener('click',   exitPanoFullscreen);

  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape' && panoPreview && panoPreview.classList.contains('fullscreen')) {
      exitPanoFullscreen();
    }
  });
});
</script>
}

<style>
/* 360 Tur Özel Stilleri */
#fullscreen-btn {
    background-color: #045129;
    color: white;
    padding: 1rem 2.5rem;
    font-size: 1.2rem;
    border-radius: 50px;
    border: 2px solid #045129;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease, transform 0.3s ease;
}

#fullscreen-btn:hover {
    background-color: white;
    color: #045129;
    transform: scale(1.05);
}
.pano-close-btn {
    position: fixed;
    top: 25px;
    right: 25px;
    width: 45px;
    height: 45px;
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    font-size: 28px;
    font-weight: bold;
    line-height: 40px;
    text-align: center;
    cursor: pointer;
    z-index: 100000;
    opacity: 0;
    visibility: hidden;
    transform: scale(0.8);
    transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
}

.pano-preview-container.fullscreen .pano-close-btn {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}

.pano-close-btn:hover {
    background: rgba(0, 0, 0, 0.8);
    transform: scale(1.1);
}

.pano-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.pano-preview-container:hover .pano-overlay {
    opacity: 1;
}
.pano-preview-container {
    position: relative;
    width: 100%;
    height: 500px;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}
.pano-preview-container.fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    border-radius: 0;
}
.pano-preview-container.fullscreen .pano-overlay {
    opacity: 0;
    pointer-events: none;
}

.virtual-tour-section {
    padding: 0rem 160px;
    background-color: #f8f9fa;
}
.section-title {
    font-size: 2.8rem;
    color: #333;
    font-weight: 400;
    margin-bottom: 16px;
    line-height: 1.2;
    letter-spacing: 1.5px;
}
@@media (max-width: 900px) and (orientation: landscape) {
    .pano-close-btn {
        top: 15px;
        right: 15px;
        width: 40px;
        height: 40px;
        line-height: 36px;
        font-size: 24px;
    }
}
@@media (max-width: 768px) {
    .virtual-tour-section {
        padding: 0rem 10px;
    }
    .pano-overlay {
        opacity: 1;
    }
}
</style>

<link rel="stylesheet" href="/css/contact-page.css">
<div class="contact-page-wrapper">
    <section class="contact-hero">
        <div class="container text-center" style="margin-top:50px">
            <span class="contact-hero-subtitle">BİZE ULAŞIN</span>
            <h1 class="contact-hero-title">Yatırımınıza Giden Yolda <br> Size Yardımcı Olalım</h1>
            <p class="contact-hero-text">Aklınızdaki sorular, proje detayları veya randevu talepleriniz için bize her zaman ulaşabilirsiniz.</p>
        </div>
    </section>

    <section class="contact-info-section">
        <div class="container">
            <div class="contact-info-grid">
                <div class="contact-info-card">
                    <div class="card-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3 class="card-title">Merkez Ofis</h3>
                    <p class="card-text">@address</p>
                    <a href="https://maps.google.com/?q=@address" target="_blank" class="card-link">Haritada Gör</a>
                </div>

                <div class="contact-info-card">
                    <div class="card-icon">
                        <i class="fas fa-phone-alt"></i>
                    </div>
                    <h3 class="card-title">Telefon</h3>
                    <p class="card-text">
                        Satış ofisimizle doğrudan iletişime geçerek projelerimiz hakkında detaylı bilgi alabilirsiniz.
                    </p>
                    <a href="tel://@phoneLink2" class="card-link">@phone2</a>
                    <br>
                    <a href="tel://@phoneLink" class="card-link">@phone</a>
                </div>

                <div class="contact-info-card">
                    <div class="card-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h3 class="card-title">E-Posta</h3>
                    <p class="card-text">
                        Tüm soru, görüş ve önerileriniz için bize e-posta yoluyla ulaşabilirsiniz.
                    </p>
                    <a href="mailto:@email" class="card-link">@email</a>
                </div>
            </div>
        </div>
    </section>

    <section class="virtual-tour-section" style="margin-bottom: 50px;">
        <h2 class="section-title text-center mb-4" id="container-360">Ofisimizi 360° Gezin</h2>
        <div id="pano-preview" class="pano-preview-container">
            <div id="pano" style="width:100%;height:100%;"></div>
            <div class="pano-overlay">
                <button id="fullscreen-btn" class="btn btn-primary">Tam Ekran</button>
            </div>
            <button id="pano-close-btn" class="pano-close-btn">×</button>
        </div>
    </section>

    <section class="contact-map-section">
        <iframe 
            src="@mapEmbedUrl"
            width="100%" 
            height="450" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade"
            title="Bereketli Topraklar Ofis Haritası">
        </iframe>
    </section>
</div>